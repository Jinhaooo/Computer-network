
# HTTP 1.1 
## HTTP1.1优点：
### 1.简单
HTTP 基本的报文格式就是 header + body，头部信息也是 key-value 简单文本的形式，易于理解，降低了学习和使用的门槛。  

### 2.灵活和易于扩展
HTTP 协议里的各类请求方法、URI/URL、状态码、头字段等每个组成要求都没有被固定死，都允许开发人员自定义和扩充。  
TODO：看看自己项目里有什么地方可以验证举例。  

### 3.应用广泛和跨平台
互联网发展至今，HTTP 的应用范围非常的广泛，从台式机的浏览器到手机上的各种 APP，从看新闻、刷贴吧到购物、理财、吃鸡，HTTP 的应用遍地开花，同时天然具有跨平台的优越性。  

## HTTP1.1缺点
HTTP自然是有他的缺点的，理解了这些，能更好地理解HTTP2.0，3.0，HTTPS所做的改进。  

### 1.无状态双刃剑
无状态的好处是，服务器不会去记忆HTTP的状态，也就不需要额外的资源，这减轻了服务器的负担，能够把更多的CPU和内存用于对外服务。  
坏处就是，在完成一些有关联性的操作时就比较麻烦，最常见的解决技术就是Cookie技术。  
Cookie通过在请求或者响应报文中写入Cookie信息来控制客户端的状态。  
<img width="719" height="691" alt="image" src="https://github.com/user-attachments/assets/0f61c5d4-bc65-4ab3-8720-a8b4d6e40645" />

### 2.明文传输双刃剑
明文意味着在传输过程中的信息，是可方便阅读的，比如 Wireshark 抓包都可以直接肉眼查看，为我们调试工作带了极大的便利性。  
但是这正是这样，HTTP 的所有信息都暴露在了光天化日下，相当于信息裸奔。在传输的漫长的过程中，信息的内容都毫无隐私可言，很容易就能被窃取.  

### 3.不安全
HTTP 比较严重的缺点就是不安全：  
通信使用明文（不加密），内容可能会被窃听。  
不验证通信方的身份，因此有可能遭遇伪装。  
无法证明报文的完整性，所以有可能已遭篡改。  

## HTTP1.1性能 
HTTP 协议是基于 TCP/IP，并且使用了「请求 - 应答」的通信模式，所以性能的关键就在这两点里。  

### 1.长连接  
在早期的HTTP1.0中，每发出一个请求，都要通过三次握手四次挥手建立一个连接，而且是串行请求，做了无谓的 TCP 连接建立和断开，增加了通信开销。  
HTTP/1.1 提出了长连接的通信方式，也叫持久连接。持久连接的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。  
<img width="616" height="472" alt="image" src="https://github.com/user-attachments/assets/9fe71c7c-aec9-4eac-97e1-c4a0b67093d7" />  
当然，如果某个 HTTP 长连接超过一定时间没有任何数据交互，服务端就会主动断开这个连接。

### 2.管道传输
HTTP/1.1 采用了长连接的方式，这使得管道（pipeline）网络传输成为了可能。  
即可在同一个 TCP 连接里面，客户端可以发起多个请求，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以减少整体的响应时间。  
<img width="351" height="381" alt="image" src="https://github.com/user-attachments/assets/8cbb77f7-9789-45e5-a04f-68e79647bbae" />  
但是服务器必须按照接收请求的顺序发送对这些管道化请求的响应！  
如果服务端在处理 A 请求时耗时比较长，那么后续的请求的处理都会被阻塞住，这称为「队头堵塞」。  
所以，HTTP/1.1 管道解决了请求的队头阻塞，但是没有解决响应的队头阻塞。  
实际上管道化传输大部分浏览器不支持，所以这个功能基本没有被使用。  

### 3.对头堵塞
「请求 - 应答」的模式会造成 HTTP 的性能问题。为什么呢？  
因为当顺序发送的请求序列中的一个请求因为某种原因被阻塞时，在后面排队的所有请求也一同被阻塞了，会招致客户端一直请求不到数据，这也就是「队头阻塞」，好比上班的路上塞车。  
<img width="387" height="422" alt="image" src="https://github.com/user-attachments/assets/9ff7c183-3691-441b-9e71-8c48563a1476" />  







